<div id="container-user-face-view row-fluid">

	<!-- -------------------------------------------------- -->
	<!-- User Header -->
	<!-- -------------------------------------------------- -->
	<div class="panel panel-primary">
		<div class="panel-heading">
			<strong>User</strong>
		</div>
	</div>


	<!-- -------------------------------------------------- -->
	<!-- User scrum update, Dev estimate -->
	<!-- -------------------------------------------------- -->
	<div class="panel panel-default">
		<div class="panel-body">
			<img class="media-object photo-small pull-left" src="/static/img/foouser.jpg">
				<div class="media-body"> 
					<div class="media-heading">
						{{user.lastName}} {{user.firstName}} ({{user.username}})
					</div>
					<p></p>
				</div>
		</div>
	</div>

	<div class="panel panel-default">
		<div class="panel-body">
			<tabset justified="true" type="pills">
				<tab heading="Scrum Updates">
					<div class="col-md-6">
						<label>
							Add Scrum Update
						</label>
						<div class="panel panel-default">
							<div class="panel-body">
								<div class="media" ng-repeat="task in tasks">
									<property-bar properties="task.propertiesToDisplay" root-div-class="media-object pull-left" reverse="false" ></property-bar>
									<button ng-click="addScrumUpdate(task)" class="btn btn-success media-object pull-right" ng-show="task.showAddButton" tooltip="Add a scrum update for this task">
										<icon id="comment"></icon>
									</button>									

									<div class="media-body">
										<div class="media-heading">
											<a ng-click="viewTask(task)" href="#" tooltip="{{task.description}}">
												{{task.name}}
											</a>
											<div class="row">
												<div class="col-md-12">
													<div class='btn-group pull-right'>
														<button type="button" class="btn btn-default" ng-click="saveScrumUpdate(task)" ng-show="!task.showAddButton" tooltip="Save scrum update" tooltip-placement='bottom'><icon id="plus-sign"></icon></button>
														<button type="button" class="btn btn-default" ng-click="clearScrumUpdate(task)" ng-show="!task.showAddButton" tooltip="Clear the text area" tooltip-placement='bottom'><icon id="unchecked"></button>
														<button type="button" class="btn btn-default" ng-click="closeScrumUpdate(task)" ng-show="!task.showAddButton" tooltip="Discard the scrum update" tooltip-placement='bottom'><icon id="trash"></icon></button>
													</div>
												</div>
											</div>
										</div>
										<p>
											<div class='form-group block'>
												<textarea class="form-control" ng-model="task.scrumText" placeholder="Add your update here" cols="10" rows="5" ng-show="!task.showAddButton">
												</textarea>
											</div>
											<div ng-show="task.hasHistory">
												<li ng-repeat="update in Updates = ( task.taskUpdates | orderBy:'date':true)">
													<span class="text-muted time-stamp">{{update.dateString}} @ {{update.timeString}} </span><br>
													{{update.text}}
												</li>
											</div>
										</p>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div class="col-md-6">
						<label>
							Scrum Updates
						</label>
						<div class="panel panel-default">
							<div class="panel-body">
								<div class="panel">
									<div class="panel-body">
										<datecombofromto
											 name="dateCombo"
											 from-date="scrumDates.startdate"
											 to-date="scrumDates.enddate"
											 from-date-label="Start Date"
											 to-date-label="End Date"
											 from-date-required="true"
											 to-date-required="true">
										</datecombofromto>
									</div>
								</div>
								<div class="media" ng-repeat="dateGroup in groupedScrumUpdates">
									<div class="media-heading">
										<span class = "text-primary">
											{{dateGroup.key | momentsAgo}}
										</span>
									</div>
									<div class="media-body">
										<div class="media" ng-repeat="taskGroup in dateGroup.values">
											<div class="media-heading">
												{{taskGroup.key}}
											</div>
											<div class="media-body">
												<ul>
													<li ng-repeat="update in taskGroup.values">
														<span class="text-muted">{{update.timeString}} </span><br>
														{{update.text}}
													</li>
												</ul>				
											</div>
										</div>
										<!--
										<li ng-repeat="taskGroup in dateGroup.values">
											{{taskGroup.key}}
											<ul>
												<li ng-repeat="update in taskGroup.values">
												<span class="text-muted time-stamp">{{update.timeString}} </span><br>
												{{update.text}}
												</li>	
											</ul>
										</li>
										-->
									</div>
								</div>
							</div>
						</div>
					</div>
				</tab>
				<tab heading="Inbox">
					<div class="panel panel-default">
						<div class="panel-body">
							<div class="media" ng-repeat="task in tasks">
								<property-bar properties="task.propertiesToDisplay" root-div-class="media-object pull-left" reverse="false" ></property-bar>
								<div class="media-body">
									<div class="media-heading">
										<a ng-click="viewTask(task)" href="#" tooltip="{{task.description}}">
											{{task.name}}
										</a>
										<p class="text-info">
											{{task.description}}
										</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</tab>
			</tabset>
		</div>
	</div>
</div>